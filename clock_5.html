<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        #main{

            display: flex;
            min-height: 100vh;
            align-items: center;
            justify-content: center;

        }
    </style>
</head>
<body>
<div id="main">
<canvas id="clock" width="500" height="500"> 你的浏览器不支持 canvas，请升级你的浏览器。</canvas>
</div>
</body>
<script>
    var clock=document.getElementById('clock');
    var cxt=clock.getContext('2d');

    function drawClock(){
        // 清除画布
        cxt.clearRect(0,0,500,500)
        // 获取当前时间
        var now = new Date();
        // 获取小时
        var hour = now.getHours();
        // 获取分钟
        var min = now.getMinutes();
        // 获取秒数
        var sec = now.getSeconds();
        console.log(hour,min,sec);

        // 将小时化为浮点型
        hour = hour+min/60;

        // 做判断
        //因为表盘是12个小时，就将24小时进制转换为12小时
        //如果当前时间大于12，那么就需要减去12，否则就输出当前时间
        hour = hour>12?hour-12:hour;

        // 设置表盘
        cxt.beginPath()
        cxt.lineWidth = 1           //设置表盘的粗细
        cxt.fillStyle="#F7C06E"
        cxt.strokeStyle = "black"   //设置表盘的颜色
        cxt.arc(250,250,200,0,360,false)   //坐标250,250  半径：200  开始角度0，结束角度360  按照顺时针方向画圆
        // cxt.stroke()
        cxt.fill()
        cxt.closePath()         //结束路径

        // 小时刻度
        // canvas坐标轴 与 正常的坐标轴的正负数是相反的，它的上面、右边是负数，下面、左边是正数
        for(var i = 1;i<=12;i++){   //12为小时刻度的刻度
            cxt.save()              //保存当前环境的状态
            cxt.lineWidth=7;       //设置时针的粗细
            cxt.strokeStyle = "black"   //设置时针的颜色
            cxt.beginPath()
            cxt.translate(250,250)  //将坐标原点移到圆心，先设置0,0点
            cxt.rotate(i*30*Math.PI/180)   //每隔30度绘制一个时钟刻度
            cxt.moveTo(0,-170);    //时钟刻度直线的开始位置
            cxt.lineTo(0,-190);    //时钟刻度直线的结束位置
            cxt.stroke()
            cxt.restore()    //调用之前保存的环境状态
            cxt.closePath()

        }


        // 分钟刻数
        for(var i=1;i<=60;i++){
            cxt.save()
            cxt.lineWidth=4  //设置分刻度的粗细
            cxt.strokeStyle = "black"
            cxt.beginPath()
            cxt.translate(250,250)
            cxt.rotate(i*6*Math.PI/180)   // 360/60 = 6 ，每隔6度绘制一个分针刻度
            cxt.moveTo(0,-180)
            cxt.lineTo(0,-190)
            cxt.stroke()
            cxt.restore()
            cxt.closePath()
        }

        //时针
        cxt.save()
        cxt.translate(250,250)
        cxt.lineWidth=7;
        cxt.strokeStyle = "black";
        cxt.rotate(hour*30*Math.PI/180)   // 每隔一小时就旋转30度，如果当前是1点，那么此时时针就旋转30度，2点就旋转60度
        cxt.beginPath()
        cxt.moveTo(0,10)   //开始点是基于原点向下10px
        cxt.lineTo(0,-90)  //结束点是基于原点向上90px
        cxt.stroke()
        cxt.restore()
        cxt.closePath()


        // 分针
        cxt.save()
        cxt.lineWidth=6
        cxt.strokeStyle = "black";
        cxt.beginPath()
        cxt.translate(250,250)
        cxt.rotate(min*6*Math.PI/180)
        cxt.moveTo(0,15)
        cxt.lineTo(0,-120)
        cxt.stroke()
        cxt.restore()
        cxt.closePath()

        // 小时数
        cxt.save()
        cxt.fillStyle="black"
        cxt.font = "22px 黑体"
        cxt.beginPath()
        cxt.translate(250,250)
        cxt.fillText(12,-12,-148)
        cxt.fillText(1,70,-125)
        cxt.fillText(2,125,-75)
        cxt.fillText(3,150,10)
        cxt.fillText(4,130,87)
        cxt.fillText(5,73,140)
        cxt.fillText(6,-6,162)
        cxt.fillText(7,-85,142)
        cxt.fillText(8,-140,87)
        cxt.fillText(9,-160,7)
        cxt.fillText(10,-145,-74)
        cxt.fillText(11,-90,-123)
        cxt.restore()
        cxt.closePath()

        //time
        cxt.beginPath()
        cxt.fillStyle="#74F7EA"
        cxt.font = "22px 黑体"
        let h = parseInt(hour)<10?`0`+parseInt(hour):parseInt(hour)
        let m = min<10?`0`+min:min
        let s = sec<10?`0`+sec:sec
        cxt.fillText(`${h}:${m}:${s}`,210,170)

        // cxt.rect(210,130, 80, 20)

        cxt.fill()
        cxt.stroke()
        cxt.closePath()


        // 秒针
        cxt.save()
        cxt.lineWidth=4
        cxt.strokeStyle = "#CC6723"
        cxt.translate(250,250)
        cxt.rotate(sec*6*Math.PI/180)
        cxt.beginPath()
        cxt.moveTo(0,20)
        cxt.lineTo(0,-170)
        cxt.stroke()
        cxt.closePath()

        // 交叉点圆心样式
        cxt.beginPath()
        cxt.arc(0,0,5,0,360,false)
        // 填充颜色
        cxt.fillStyle = "white"
        cxt.fill()
        cxt.stroke()
        cxt.closePath()

        // 前端小圆点
        cxt.beginPath()
        cxt.arc(0,-140,5.5,0,360,false)
        cxt.fillStyle = "white"
        cxt.fill()
        cxt.stroke()
        cxt.restore()
        cxt.closePath()


    }
    drawClock();
    // 定时器  一秒执行一次
    setInterval(drawClock,1000)
</script>
</html>